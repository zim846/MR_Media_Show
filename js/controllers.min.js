var feedappController=function(a){function b(){var a=$("#feedapp-showcase"),b=a.find(".wrapper"),c=a.find(".desktop-container"),d=a.find(".mobile-container"),e=null,f=null;return e=c.find(".swiper-container").swiper({speed:800,loop:!0,autoplay:3e3,followFinger:!1}),f=d.find(".swiper-container").swiper({speed:800,loop:!0,autoplay:3e3,followFinger:!1}),TweenMax.fromTo(b,_duration,{y:50,alpha:0},{y:0,alpha:1,ease:Power2.easeOut,onComplete:function(){b.removeAttr("style")}}),{pageId:a.attr("id"),desktopSwiper:e,mobileSwiper:f}}function c(){var a=$("#feedapp-team"),b=a.find(".splitter"),c=null;return c=b.splitter({debug:_debug,duration:_splitterDuration,preventClick:!1}),{pageId:a.attr("id"),splitter:c}}function d(){var b=$("#feedapp-page"),c=b.find(".scroll-down"),d=b.find(".video-popup"),e=b.find(".cineslider-container"),g=b.find(".cineslider-slide"),h=null;return h=e.cineSlider({debug:_debug,duration:_duration,shifters:["#e6e6e6","#35017f"]}),h.on("slidechangestart",function(b,c,d,e){c.attr("id"),d.attr("id"),d.find(".video-popup");a.setActive("#"+d.attr("id")),d.find(".scroll-down").hide(),f.showcase.desktopSwiper.stopAutoplay(),f.showcase.mobileSwiper.stopAutoplay(),setTimeout(function(){d.data("menu-invert")===!0?a.invertColors():a.resetColors()},1e3*h.getSlidingDuration()/2+("down"===e?180:-100))}),h.on("slidechangecomplete",function(a,b,c,d){var e=(b.attr("id"),c.attr("id"));c.find(".scroll-down").fadeIn(),e===f.showcase.pageId&&(f.showcase.desktopSwiper.update(),f.showcase.desktopSwiper.startAutoplay(),f.showcase.mobileSwiper.update(),f.showcase.mobileSwiper.startAutoplay())}),a.on("navigationclick",function(a,b,c){var d=g.index($("#"+b));-1!=d&&(h.unlock(),h.slideTo(d))}),d.videoPopup({debug:_debug,onBeforeShow:function(){h.lock(),a.hide(),c.fadeOut(400)},onAfterHide:function(){h.unlock(),c.fadeIn(400)},onBeforeHide:function(){a.show(.2)}}),c.on("click",function(a){a.preventDefault(),h.slideNext()}),{pageId:b.attr("id")}}var e={},f={},g=function(a){f.showcase=b(),f.team=c(),f.main=d(),setTimeout(function(){a.call()},800)};return e.pageId="feedapp-page",e.view="views/feedapp.php",e.execute=g,e.data=f,e},homepageController=function(a){function b(){var a=$("#homepage-introduction"),b=$("header").find('.navigation a[href="#homepage-introduction"] .progress-border'),c=a.find(".intro-paragraph"),d=!1,e=null,f=null,g=new TimelineMax;return f=a.find(".starwars-container").starwarsScroll({debug:_debug,stagger:.5,offsetScale:.1,offsetAlpha:.25,duration:1.2,lock:!0}),f.on("progress",function(a,e){b.find(".progress-line").css("width",100*e+"%"),100*e>5?d&&(d=!1,c.stop().fadeOut(1200)):d||(d=!0,c.stop().fadeIn(1200))}),g.add(TweenMax.staggerFrom(a.find(".starwars-container p").slice(0,5),_duration,{y:100,alpha:0,ease:Power2.easeInOut,onComplete:function(){f.unlock(),d=!0,c.stop().fadeIn()}},.2)),e=a.find(".videobg-container").videoBg({debug:_debug,poster:"images/intro-background.jpg",shadow:!0,shadowAlpha:.3,source:[{type:"video/mp4",src:"videos/intro.mp4"},{type:"video/webm",src:"videos/intro.webm"}]}),{pageId:a.attr("id"),backgroundVideo:e,starwarsAnimation:g,starwarsScroll:f}}function c(){var a=$("#homepage-technology");return{pageId:a.attr("id")}}function d(){var a=$("#homepage-tech-spotlight"),b=$("header").find('.navigation a[href="#homepage-tech-spotlight"] .progress-border'),c=null,d=a.find(".title"),e=a.find(".swiper-container"),f=a.find(".swiper-slide"),g=null,h=null;return g=new Swiper(e,{direction:"vertical",speed:1200,parallax:!0,onlyExternal:!0}),h=a.frameByFrame({debug:_debug,responsive:!0,mousewheelThrottle:60,frameHighDelay:.6,frameNumber:180,framePath:{high:{path:"images/frame-high/",prefix:""},low:{path:"images/frame-low/",prefix:""}}}),c=a.find("canvas"),h.on("framesloaded",function(){a.removeClass("loading")}),h.on("framedraw",function(a,h,i,j){b.find(".progress-line").css("width",100*j+"%"),10===h&&TweenMax.to(d,_duration,{alpha:"down"===i?0:1,scale:"down"===i?.8:1,ease:"down"===i?Power2.easeInOut:Power2.easeOut}),15===h&&(device.desktop()||device.tablet()&&device.landscape()?(TweenMax.to(c,_duration,{x:"down"===i?"16.666%":"0%",ease:Power2.easeInOut}),TweenMax.set(e,{y:"0%"}),TweenMax.to(e,_duration,{x:"down"===i?"0%":"-100%",ease:Power2.easeInOut})):(TweenMax.set(e,{x:"0%"}),TweenMax.to(e,_duration,{y:"down"===i?"0%":"100%",ease:Power2.easeInOut}))),f.each(function(){var a=$(this),b=parseInt($(this).data("start"),10),c=parseInt($(this).data("end"),10),d=null;h>=b&&c>=h&&(d=f.index(a),-1!==d&&g.slideTo(d))})}),{pageId:a.attr("id"),swiper:g,frameByFrame:h,title:d}}function e(){var a=$("#homepage-why-music");return{pageId:a.attr("id")}}function f(){var a=$("#homepage-feed-app"),b=a.find(".splitter"),c=null;return c=b.splitter({debug:_debug,duration:_splitterDuration,preventClick:!1}),{pageId:a.attr("id"),splitter:c}}function g(){var b=$("#homepage-page"),c=b.find(".cineslider-container"),d=b.find(".cineslider-slide"),e=b.find(".video-popup"),f=b.find(".scroll-down"),g=null;return g=c.cineSlider({debug:_debug,duration:_duration,shifters:["#e6e6e6","#35017f"],currentSlide:1,lock:!0}),g.on("slidechangestart",function(b,c,d,e){var f=(c.attr("id"),d.attr("id")),h=d.find(".video-popup");a.setActive("#"+d.attr("id")),d.find(".scroll-down").hide(),h.length>0&&"down"===e&&animateVideoPopup(h,g.getSlidingDuration()/2),f===i.introduction.pageId&&(i.introduction.starwarsScroll.refresh(),i.introduction.backgroundVideo.play(),g.lock()),f===i.techSpotlight.pageId&&(g.lock(),"down"===e&&TweenMax.from(i.techSpotlight.title,_duration,{scale:1.5,y:200,delay:g.getSlidingDuration()/2,ease:Power2.easeOut})),setTimeout(function(){d.data("menu-invert")===!0?a.invertColors():a.resetColors()},1e3*g.getSlidingDuration()/2+("down"===e?180:-100))}),g.on("slidechangecomplete",function(a,b,c,d){var e=b.attr("id");c.attr("id");c.find(".scroll-down").fadeIn(),e===i.introduction.pageId&&i.introduction.backgroundVideo.pause()}),e.videoPopup({debug:_debug,onBeforeShow:function(){g.lock(),a.hide()},onAfterHide:function(){g.unlock()},onBeforeHide:function(){a.show(.2)}}),f.on("click",function(a){a.preventDefault(),g.unlock(),g.slideNext()}),a.on("navigationclick",function(a,b,c){var e=d.index($("#"+b));-1!=e&&(g.unlock(),g.slideTo(e))}),{pageId:b.attr("id"),slider:g}}var h={},i={},j=function(a){i.introduction=b(),i.technology=c(),i.techSpotlight=d(),i.whyMusic=e(),i.feedApp=f(),i.main=g(),i.introduction.starwarsScroll.on("complete",function(){i.main.slider.unlock()}),i.techSpotlight.frameByFrame.on("sequencecomplete sequencereverse",function(){i.main.slider.unlock()}),i.introduction.backgroundVideo.on("videoload",function(){setTimeout(function(){a.call()},800)}),i.introduction.backgroundVideo.on("posterloaded",function(){setTimeout(function(){a.call()},800)})};return h.pageId="homepage-page",h.view="views/homepage.php",h.execute=j,h.data=i,h},prototypeController=function(a){function b(){var a=$("#prototype-page"),b=a.find(".nl-form"),c=null;return c=b.nlform({debug:_debug}),TweenMax.fromTo(b,_duration,{y:50,alpha:0},{y:0,alpha:1,ease:Power2.easeOut}),{pageId:a.attr("id"),form:c}}var c={},d={},e=function(a){d.main=b(),setTimeout(function(){a.call()},800)};return c.pageId="prototype-page",c.view="views/prototype.php",c.execute=e,c.data=d,c},scheduleController=function(a){function b(){var a=$("#schedule-page"),b=a.find(".nl-form"),c=null;return c=b.nlform({debug:_debug}),TweenMax.fromTo(b,_duration,{y:50,alpha:0},{y:0,alpha:1,ease:Power2.easeOut}),{pageId:a.attr("id"),form:c}}var c={},d={},e=function(a){d.main=b(),setTimeout(function(){a.call()},800)};return c.pageId="schedule-page",c.view="views/schedule-meeting.php",c.execute=e,c.data=d,c},teamController=function(a){function b(){var a=$("#meet-team-page"),b=a.find(".team-member"),c=a.find(".more");return Modernizr.touch||(TweenMax.set(b.children(),{y:50,alpha:0}),b.waypoint({context:a[0],offset:"90%",handler:function(a){this.destroy(),TweenMax.staggerTo($(this.element).children(),_duration,{y:0,alpha:1,ease:Power2.easeOut},.2)}})),c.on("click",".more-button",function(b){b.preventDefault();var c=$(this),d=$(b.delegateTarget),e=d.find(".more-text"),f=e.height();TweenMax.isTweening(e)||(c.toggleClass("active"),0!==f?(TweenMax.to(a,_duration/2,{scrollTop:d.offset().top-f+a.scrollTop()-a.height()/2,ease:Power2.easeInOut}),TweenMax.to(e,_duration/2,{height:0,display:"none",ease:Power2.easeInOut})):(TweenMax.set(e,{height:"auto"}),f=e.height(),TweenMax.to(e,_duration/2,{height:f,display:"block",ease:Power2.easeInOut,onComplete:function(){TweenMax.set(e,{height:"auto"})}}),TweenMax.to(a,_duration/2,{scrollTop:d.offset().top+a.scrollTop()-a.height()/2,ease:Power2.easeInOut})))}),{pageId:a.attr("id")}}function c(){var a=$("#meet-team-page"),b=a.find(".map-container"),c=b.find(".map"),d=new google.maps.LatLng(37.7952,-122.397313),e=null,f={center:d,zoom:12,scrollwheel:!1,mapTypeId:google.maps.MapTypeId.ROADMAP,styles:[{featureType:"administrative",elementType:"all",stylers:[{visibility:"simplified"},{hue:"#ff0000"}]},{featureType:"administrative",elementType:"geometry",stylers:[{visibility:"off"},{color:"#b56969"}]},{featureType:"administrative",elementType:"geometry.fill",stylers:[{visibility:"on"},{color:"#da7171"}]},{featureType:"administrative",elementType:"geometry.stroke",stylers:[{color:"#e41b1b"}]},{featureType:"administrative",elementType:"labels",stylers:[{color:"#fee9e9"},{visibility:"simplified"}]},{featureType:"administrative",elementType:"labels.text",stylers:[{visibility:"on"},{color:"#fffafa"}]},{featureType:"administrative",elementType:"labels.text.fill",stylers:[{color:"#320d7f"},{visibility:"on"}]},{featureType:"landscape",elementType:"all",stylers:[{color:"#f2f2f2"}]},{featureType:"poi",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"road",elementType:"all",stylers:[{saturation:-100},{lightness:45}]},{featureType:"road.highway",elementType:"all",stylers:[{visibility:"simplified"}]},{featureType:"road.arterial",elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"transit",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"water",elementType:"all",stylers:[{color:"#ffffff"},{visibility:"on"}]}],panControl:!1,streetViewControl:!1,mapTypeControl:!1,zoomControl:!0,zoomControlOptions:{style:google.maps.ZoomControlStyle.SMALL,position:google.maps.ControlPosition.LEFT_TOP}};return e=new google.maps.Map(c[0],f),gMarker=new google.maps.Marker({icon:"images/map-marker.png",map:e,zIndex:9998,position:d,url:"https://goo.gl/maps/7vdMC"}),google.maps.event.addListener(gMarker,"click",function(){window.open(this.url,"_blank")}),google.maps.event.addDomListener(window,"resize",function(){e.setCenter(d)}),Modernizr.touch||(TweenMax.set(b.children(),{y:50,alpha:0}),b.waypoint({context:a[0],offset:"90%",handler:function(a){this.destroy(),TweenMax.staggerTo($(this.element).children(),_duration,{y:0,alpha:1,ease:Power2.easeOut},.2)}})),{pageId:a.attr("id")}}var d={},e={},f=function(a){e.teamMembers=b(),e.contactMap=c(),setTimeout(function(){a.call()},800)};return d.pageId="meet-team-page",d.view="views/team.php",d.execute=f,d.data=e,d};